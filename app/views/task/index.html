{% extends "base.html" %}
{% import "macros/forms.html" as forms %}
{% block content %}

{% if message %}
<div class="alert alert-success">
    {{message}}
</div>
{% endif %}

<h1>Listing 

    {% if user_logged_in %}
    Tasks for {{user_logged_in.username}}
    {% endif %}
</h1>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Task</th>
            <th>Description</th>
            <th>Priority</th>
        </tr>
    </thead>

    <tbody>
        {% for task in tasks %}
        {% if task.owner_id == user_logged_in.id %}
        <tr>
            <td><a href="{{base_path}}/task/{{task.id}}">{{task.taskname}}</td>
            <td>{{task.description}}</td>
            <td>{{task.priorityname}}</td>
            <td><a class="btn btn-default btn-sm" href="{{base_path}}/task/{{task.id}}/edit">Edit</a></td>
            <td><form method="post" action="{{base_path}}/task/{{task.id}}/destroy" style="display: inline-block;">
                    <button type="submit" class="btn btn-danger">{{text|default('Delete')}}</button>
                </form></td>
        </tr>
        {% endif %}
        {% endfor %}
    </tbody>
</table>
{% endblock %}
